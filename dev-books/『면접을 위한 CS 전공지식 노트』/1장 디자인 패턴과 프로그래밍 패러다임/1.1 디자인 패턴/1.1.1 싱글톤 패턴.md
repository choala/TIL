## ì‹±ê¸€í†¤ íŒ¨í„´(Singleton Pattern)

### ğŸ‘» ì •ì˜ ë° íŠ¹ì§•
> í•˜ë‚˜ì˜ í´ë˜ìŠ¤ê°€ ì˜¤ì§ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ ê°€ì§€ëŠ” íŒ¨í„´
- í´ë˜ìŠ¤ê°€ ìµœì´ˆ í•œ ë²ˆë§Œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³ , í•´ë‹¹ ë©”ëª¨ë¦¬ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•¨
- ì´í›„ì—ëŠ” ìƒì„±ìê°€ í˜¸ì¶œë˜ì–´ë„ ì´ë¯¸ ìƒì„±í•œ ê°ì²´ë¥¼ ë°˜í™˜í•¨

### ğŸ‘¼ğŸ» ì¥ì 
- ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¹„ìš©ì´ ì ê²Œ ë“¦
- ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ë¥¼ ì œì–´í•¨ìœ¼ë¡œì¨ ê³µìœ  ë¦¬ì†ŒìŠ¤(ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” íŒŒì¼)ì— ëŒ€í•œ ì ‘ê·¼ ì œì–´ê°€ ê°•í™”ë¨
- ì „ì—­ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ ë°ì´í„° ê³µìœ ë¥¼ í†µí•´ ë©”ëª¨ë¦¬ ë‚­ë¹„ë¥¼ ìµœì†Œí™”í•  ìˆ˜ ìˆìŒ

### ğŸ™€ ë‹¨ì 
- í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ê°„ ì˜ì¡´ì„±ì´ ë†’ìŒ
- TDD(Test-Driven Development)ì˜ ì–´ë ¤ì›€
  - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ í•  ë•Œ í…ŒìŠ¤íŠ¸ê°€ ì„œë¡œ ë…ë¦½ì ì´ì–´ì•¼ í•˜ê³ , í…ŒìŠ¤íŠ¸ë¥¼ ì–´ë–¤ ìˆœì„œë¡œë“  ì‹¤í–‰í•  ìˆ˜ ìˆì–´ì•¼ í•¨
  - í•˜ì§€ë§Œ ì‹±ê¸€í†¤ íŒ¨í„´ì˜ íŠ¹ì„±ìƒ í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ë…ë¦½ì ì¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì–´ë ¤ì›€
 
### ğŸŒ´ í•´ê²° ë°©ë²•
- `ì˜ì¡´ì„± ì£¼ì…`(Dependency Injection)ì„ í†µí•´ ê°ì²´ê°„ ë†’ì€ ì˜ì¡´ì„±ì„ í•´ê²°í•  ìˆ˜ ìˆìŒ
  - ì˜ì¡´ì„± ì£¼ì…ì´ë€? í´ë˜ìŠ¤ ì‚¬ì´ì— ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‘ì–´ ì™¸ë¶€ì—ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì£¼ì…í•¨ìœ¼ë¡œì¨ í´ë˜ìŠ¤ê°„ ê²°í•©ë„ë¥¼ ëŠìŠ¨í•˜ê²Œ ë§Œë“œëŠ” ë°©ë²•

### ğŸ’¬ êµ¬í˜„
#### ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì‹±ê¸€í†¤ íŒ¨í„´
- ë¦¬í„°ëŸ´ {} ë˜ëŠ” new Objectë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ë©´ ë‹¤ë¥¸ ì–´ë– í•œ ê°ì²´ì™€ë„ ê°™ì§€ ì•Šìœ¼ë¯€ë¡œ ì´ ìì²´ë§Œìœ¼ë¡œ ì‹±ê¸€í†¤ íŒ¨í„´ì— ë¶€í•©í•¨
- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ êµ¬í˜„í•˜ëŠ” ì¼ë°˜ì ì¸ ì‹±ê¸€í†¤ íŒ¨í„´ì€ ì•„ë˜ì™€ ê°™ìŒ
```javascript
class Singleton {
    constructor() {
        if (!Singleton.instance) {
            Singleton.instance = this
        }
        
        return Singleton.instance
    }
    
    getInstance() {
        return this.instance
    }
}
```
- ì‹±ê¸€í†¤ íŒ¨í„´ì€ ë¹„ìš©ì´ ë†’ì€ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‘ì—…ì— ë§ì´ ì“°ì´ëŠ”ë° ì˜ˆì œ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ìŒ
  - Node.jsì—ì„œ MongoDBë¥¼ ì—°ê²°í•  ë•Œ ì‚¬ìš©í•˜ëŠ” mongoose ëª¨ë“ˆì´ë‚˜ MySQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì—ë„ ì‹±ê¸€í†¤ íŒ¨í„´ì´ ì“°ì„
```javascript
const createConnection = url => ({"url" : url})

class DB {
    constructor(url) {
        if (!DB.instance) { 
            DB.instance = createConnection(url)
        }
        
        return DB.instance
    }
    
    connect() {
        return this.instance
    }
}
```

#### ìë°”ì˜ ì‹±ê¸€í†¤ íŒ¨í„´
- ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ë™ê¸°í™” ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ ì¸ìŠ¤í„´ìŠ¤ê°€ 2ê°œ ìƒì„±ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒ
- ì¤‘ì²© í´ë˜ìŠ¤ holderë¥¼ ë‘ë©´ getInstance() ë©”ì„œë“œê°€ í˜¸ì¶œë  ë•Œ ì‹±ê¸€í†¤ ê°ì²´ê°€ ìƒì„±ë˜ë¯€ë¡œ jvmì˜ ì›ìì  íŠ¹ì„±ì— ë”°ë¼ ìŠ¤ë ˆë“œ ì„¸ì´í”„í•˜ê²Œ ë¨
- holder ë‚´ë¶€ í´ë˜ìŠ¤ ë³€ìˆ˜ë¥¼ staticìœ¼ë¡œ ì„ ì–¸í–ˆê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ê°€ 1ê°œë§Œ ìƒì„±ë˜ë©° final í‚¤ì›Œë“œë¡œ ê°’ì˜ ì¬í• ë‹¹ì„ ë§‰ìŒ
- ê·¸ë¦¬ê³  ì´ì™€ ê°™ì€ ë°©ë²•ì„ `holderì— ì˜í•œ ì´ˆê¸°í™”`ë¼ê³  ë¶€ë¦„
```java
class Singleton {
    private static class instanceHolder {
        private static final Singleton INSTANCE = new Singleton();
    }
    
    public static Singleton getInstance() {
        return instanceHolder.INSTANCE;
    }
}
```

### ğŸŸ ì°¸ê³  ìë£Œ
- https://refactoring.guru/ko/design-patterns/singleton
- https://janechoi.tistory.com/4
- https://github.com/gyoogle/tech-interview-for-developer/blob/master/Design%20Pattern/Singleton%20Pattern.md
- https://huimang2.github.io/design-pattern/creational/singleton-pattern
- https://mangkyu.tistory.com/150
